<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Ç≥„Ç§„É≥„Éè„É≥„Çø„Éº „Ç¢„Éâ„Éô„É≥„ÉÅ„É£„Éº</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <!-- „É¢„ÉÄ„É≥„Å™HUD„É¨„Ç§„Ç¢„Ç¶„ÉàÔºöÁîªÈù¢‰∏äÈÉ®„Å´Ê®™‰∏¶„Å≥ -->
        <div class="hud-top">
            <div class="hud-left">
                <div class="score-display">
                    <span class="label">SCORE</span>
                    <span class="value" id="score">0</span>
                </div>
            </div>
            <div class="hud-center">
                <div class="lives-display">
                    <span class="label">LIVES</span>
                    <span class="value" id="lives">3</span>
                </div>
                <div class="timer-display">
                    <span class="label">TIME</span>
                    <span class="value" id="timer">0:00</span>
                </div>
            </div>
            <div class="hud-right">
                <div class="coins-display">
                    <span class="label">COINS</span>
                    <span class="value" id="coins">0</span>
                </div>
                <div class="volume-control">
                    <button id="muteBtn" class="mute-btn">üîä</button>
                    <input type="range" id="volumeSlider" min="0" max="100" value="30" class="volume-slider">
                </div>
            </div>
        </div>
        
        <!-- „Ç≤„Éº„É†„Ç®„É™„Ç¢ -->
        <div class="game-area">
            <canvas id="gameCanvas" width="1024" height="576"></canvas>
        </div>
        
        <!-- „É¢„ÉÄ„É≥„Å™„Ç≤„Éº„É†„Ç™„Éº„Éê„ÉºÁîªÈù¢ -->
        <div class="game-over-screen" id="gameOverScreen" style="display: none;">
            <div class="result-content">
                <div class="result-header">
                    <h1>GAME OVER</h1>
                </div>
                <div class="score-section">
                    <div class="final-score">
                        <span class="score-label">FINAL SCORE</span>
                        <span class="score-value" id="finalScore">0</span>
                    </div>
                </div>
                <div class="action-buttons">
                    <button id="restartBtn1" class="primary-btn">„ÇÇ„ÅÜ‰∏ÄÂ∫¶„Éó„É¨„Ç§</button>
                    <button id="backToTitleBtn1" class="secondary-btn">„Çø„Ç§„Éà„É´„Å´Êàª„Çã</button>
                </div>
            </div>
        </div>
        
        <!-- „É¢„ÉÄ„É≥„Å™„Ç≤„Éº„É†„ÇØ„É™„Ç¢ÁîªÈù¢ -->
        <div class="game-clear-screen" id="gameClearScreen" style="display: none;">
            <div class="result-content">
                <div class="result-header">
                    <h1>GAME CLEAR!</h1>
                    <p class="congratulations">„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅ</p>
                </div>
                <div class="score-section">
                    <div class="final-score">
                        <span class="score-label">FINAL SCORE</span>
                        <span class="score-value" id="clearScore">0</span>
                    </div>
                </div>
                <div class="action-buttons">
                    <button id="restartBtn2" class="primary-btn">„ÇÇ„ÅÜ‰∏ÄÂ∫¶„Éó„É¨„Ç§</button>
                    <button id="backToTitleBtn2" class="secondary-btn">„Çø„Ç§„Éà„É´„Å´Êàª„Çã</button>
                </div>
            </div>
        </div>
        
        <!-- „É¢„ÉÄ„É≥„Å™„Çπ„Çø„Éº„ÉàÁîªÈù¢ -->
        <div class="start-screen" id="startScreen" style="display: flex;">
            <div class="menu-content">
                <div class="title-section">
                    <h1>„Ç≥„Ç§„É≥„Éè„É≥„Çø„Éº<br>„Ç¢„Éâ„Éô„É≥„ÉÅ„É£„Éº</h1>
                </div>
                <div class="controls-section">
                    <h3>Êìç‰ΩúÊñπÊ≥ï</h3>
                    <div class="control-grid">
                        <div class="control-item">
                            <span class="key">‚Üê ‚Üí</span>
                            <span class="action">ÁßªÂãï</span>
                        </div>
                        <div class="control-item">
                            <span class="key">A D</span>
                            <span class="action">ÁßªÂãï</span>
                        </div>
                        <div class="control-item">
                            <span class="key">SPACE</span>
                            <span class="action">„Ç∏„É£„É≥„Éó</span>
                        </div>
                        <div class="control-item">
                            <span class="key">W</span>
                            <span class="action">„Ç∏„É£„É≥„Éó</span>
                        </div>
                    </div>
                </div>
                <div class="game-info">
                    <h3>„Ç≤„Éº„É†ÊÉÖÂ†±</h3>
                    <div class="info-item">
                        <span class="info-icon">üéµ</span>
                        <span class="info-text">„Ç≤„Éº„É†ÈñãÂßãÊôÇ„Å´Èü≥Ê•Ω„ÅåÂÜçÁîü„Åï„Çå„Åæ„Åô</span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">üéÆ</span>
                        <span class="info-text">„Ç≤„Éº„É†‰∏≠„ÅÆÈü≥Èáè„ÅØÂè≥‰∏ä„ÅßË™øÊï¥„Åß„Åç„Åæ„Åô</span>
                    </div>
                </div>
                <div class="button-section">
                    <button id="startBtn" class="primary-btn" disabled>
                        <span class="btn-text">Ë™≠„ÅøËæº„Åø‰∏≠...</span>
                        <span class="loading-spinner"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- file://„Éó„É≠„Éà„Ç≥„É´Ë≠¶Âëä„Ç∑„Çπ„ÉÜ„É† -->
    <script>
        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´„Éó„É≠„Éà„Ç≥„É´„Çí„ÉÅ„Çß„ÉÉ„ÇØ
        document.addEventListener('DOMContentLoaded', function() {
            if (window.location.protocol === 'file:') {
                showProtocolWarning();
            }
        });

        function showProtocolWarning() {
            // Ë≠¶Âëä„Ç™„Éº„Éê„Éº„É¨„Ç§„Çí‰ΩúÊàê
            const warningOverlay = document.createElement('div');
            warningOverlay.id = 'protocolWarning';
            warningOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.9);
                color: white;
                font-family: Arial, sans-serif;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                text-align: center;
                padding: 20px;
                box-sizing: border-box;
            `;

            warningOverlay.innerHTML = `
                <div style="max-width: 600px; background: linear-gradient(135deg, #FF4444, #CC0000); padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                    <h1 style="margin: 0 0 20px 0; font-size: 2.2em; color: #FFE4E1;">‚ö†Ô∏è „Ç¢„ÇØ„Çª„ÇπÊñπÊ≥ï„Ç®„É©„Éº</h1>
                    <p style="font-size: 1.1em; margin: 15px 0; line-height: 1.5;">
                        „Ç≤„Éº„É†„Ååfile://„Éó„É≠„Éà„Ç≥„É´„ÅßÈñã„Åã„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ<br>
                        SVG„Ç∞„É©„Éï„Ç£„ÉÉ„ÇØ„ÅåË™≠„ÅøËæº„ÇÅ„Å™„ÅÑ„Åü„ÇÅ„ÄÅ„Ç≤„Éº„É†„ÅåÊ≠£Â∏∏„Å´Âãï‰Ωú„Åó„Åæ„Åõ„Çì„ÄÇ
                    </p>
                    
                    <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <h2 style="margin: 0 0 15px 0; color: #90EE90;">‚úÖ Ëß£Ê±∫ÊñπÊ≥ï</h2>
                        <div style="text-align: left; font-size: 0.95em;">
                            <p><strong>1. „Çø„Éº„Éü„Éä„É´/„Ç≥„Éû„É≥„Éâ„Éó„É≠„É≥„Éó„Éà„ÅßHTTP„Çµ„Éº„Éê„Éº„ÇíËµ∑ÂãïÔºö</strong></p>
                            <div style="background: #1a1a1a; color: #00ff00; padding: 10px; border-radius: 5px; font-family: monospace; margin: 8px 0;">
                                python3 -m http.server 8080<br>
                                # „Åæ„Åü„ÅØ<br>
                                npx serve .<br>
                                # „Åæ„Åü„ÅØ<br>
                                php -S localhost:8080
                            </div>
                            <p><strong>2. „Éñ„É©„Ç¶„Ç∂„ÅßHTTP„Ç¢„ÇØ„Çª„ÇπÔºö</strong></p>
                            <div style="background: #1a1a1a; color: #ffff00; padding: 10px; border-radius: 5px; font-family: monospace; margin: 8px 0;">
                                http://localhost:8080/index.html
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="closeWarning()" style="
                        background: linear-gradient(135deg, #4CAF50, #45a049);
                        color: white;
                        border: none;
                        padding: 12px 25px;
                        font-size: 1em;
                        border-radius: 8px;
                        cursor: pointer;
                        margin-top: 10px;
                        box-shadow: 0 4px 10px rgba(0,0,0,0.3);
                        transition: transform 0.2s;
                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                        Ë≠¶Âëä„ÇíÈñâ„Åò„ÇãÔºàÂà∂Èôê‰ªò„Åç„Åß„Éó„É¨„Ç§Ôºâ
                    </button>
                </div>
            `;

            document.body.appendChild(warningOverlay);
        }

        function closeWarning() {
            const warning = document.getElementById('protocolWarning');
            if (warning) {
                warning.remove();
            }
        }
    </script>

    <!-- „Ç≤„Éº„É†„Çπ„ÇØ„É™„Éó„Éà -->
    <script src="src/config.js"></script>
    <script src="src/levels.js"></script>
    <script src="src/level-loader.js"></script>
    <script src="src/music.js"></script>
    <script src="src/player-graphics.js"></script>
    <script src="src/svg-renderer.js"></script>
    <script src="src/svg-player-renderer.js"></script>
    <script src="src/svg-enemy-renderer.js"></script>
    <script src="src/svg-item-renderer.js"></script>
    <!-- „É¢„Ç∏„É•„Éº„É´Âåñ„Åï„Çå„Åü„Éï„Ç°„Ç§„É´ -->
    <script src="src/svg-graphics.js"></script>
    <script src="src/game-state.js"></script>
    <script src="src/score-animation.js"></script>
    <script src="src/player.js"></script>
    <script src="src/input-manager.js"></script>
    <script src="src/game.js"></script>
</body>
</html>