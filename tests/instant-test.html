<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>å³åº§ãƒ†ã‚¹ãƒˆçµæœ</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>å³åº§ãƒ†ã‚¹ãƒˆçµæœ</h1>
    <div id="output"></div>

    <!-- åŸºæœ¬çš„ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿ -->
    <script src="../src/config.js"></script>
    <script src="../src/levels.js"></script>
    
    <script>
        // ã‚¨ãƒ©ãƒ¼ã‚­ãƒ£ãƒƒãƒ
        window.onerror = function(msg, file, line) {
            document.getElementById('output').innerHTML += 
                `<div class="error">âŒ JavaScript Error: ${msg} (${file}:${line})</div>`;
        };
        
        // CORSè­¦å‘Šç„¡åŠ¹åŒ–
        window.DISABLE_CORS_WARNING = true;
        
        let output = '';
        
        // å³åº§ã«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        output += '<h2>ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœ</h2>';
        
        let total = 0;
        let passed = 0;
        let failed = 0;
        
        // CANVAS_WIDTH ãƒ†ã‚¹ãƒˆ
        total++;
        if (typeof CANVAS_WIDTH !== 'undefined') {
            output += `<div class="success">âœ… CANVAS_WIDTH = ${CANVAS_WIDTH}</div>`;
            passed++;
        } else {
            output += `<div class="error">âŒ CANVAS_WIDTH æœªå®šç¾©</div>`;
            failed++;
        }
        
        // PLAYER_CONFIG ãƒ†ã‚¹ãƒˆ
        total++;
        if (typeof PLAYER_CONFIG !== 'undefined') {
            output += `<div class="success">âœ… PLAYER_CONFIG å®šç¾©æ¸ˆã¿ (speed: ${PLAYER_CONFIG.speed})</div>`;
            passed++;
        } else {
            output += `<div class="error">âŒ PLAYER_CONFIG æœªå®šç¾©</div>`;
            failed++;
        }
        
        // levelData ãƒ†ã‚¹ãƒˆ
        total++;
        if (typeof levelData !== 'undefined' && levelData.platforms) {
            output += `<div class="success">âœ… levelData å®šç¾©æ¸ˆã¿ (ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ : ${levelData.platforms.length}å€‹)</div>`;
            passed++;
        } else {
            output += `<div class="error">âŒ levelData æœªå®šç¾©</div>`;
            failed++;
        }
        
        // çµæœè¡¨ç¤º
        output += `<h3>åˆè¨ˆ: ${total}ä»¶ | æˆåŠŸ: ${passed}ä»¶ | å¤±æ•—: ${failed}ä»¶</h3>`;
        
        if (failed === 0) {
            output += '<div class="success">ğŸ‰ åŸºæœ¬ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿æˆåŠŸï¼</div>';
        } else {
            output += `<div class="error">âš ï¸ ${failed}ä»¶ã®å•é¡ŒãŒã‚ã‚Šã¾ã™</div>`;
        }
        
        document.getElementById('output').innerHTML = output;
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«çµæœè¨­å®š
        window.INSTANT_TEST_RESULT = {
            total: total,
            passed: passed,
            failed: failed,
            status: failed === 0 ? 'success' : 'failed'
        };
    </script>
</body>
</html>