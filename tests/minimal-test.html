<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ€å°ãƒ†ã‚¹ãƒˆ - JavaScriptã‚¨ãƒ©ãƒ¼ç‰¹å®š</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #f0f0f0;
        }
        .log { 
            background: white; 
            padding: 10px; 
            margin: 5px 0; 
            border-left: 4px solid #007bff; 
        }
        .error { border-left-color: #dc3545; background: #fff5f5; }
        .success { border-left-color: #28a745; background: #f0fff4; }
        .warning { border-left-color: #ffc107; background: #fffbf0; }
    </style>
</head>
<body>
    <h1>æœ€å°ãƒ†ã‚¹ãƒˆ - ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿ç¢ºèª</h1>
    <div id="log-container">
        <div class="log">ãƒ†ã‚¹ãƒˆé–‹å§‹...</div>
    </div>

    <script>
        // ãƒ­ã‚°é–¢æ•°
        function log(message, type = 'log') {
            const container = document.getElementById('log-container');
            const div = document.createElement('div');
            div.className = `log ${type}`;
            div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            container.appendChild(div);
            console.log(message);
        }

        // ã‚¨ãƒ©ãƒ¼ã‚­ãƒ£ãƒƒãƒ
        window.addEventListener('error', (e) => {
            log(`âŒ JavaScript Error: ${e.message} (${e.filename}:${e.lineno})`, 'error');
        });

        // Promise rejection ã‚­ãƒ£ãƒƒãƒ
        window.addEventListener('unhandledrejection', (e) => {
            log(`âŒ Promise Rejection: ${e.reason}`, 'error');
        });

        log('âœ… åŸºæœ¬JavaScriptå®Ÿè¡Œé–‹å§‹');
    </script>

    <!-- 1ã¤ãšã¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èª­ã¿è¾¼ã¿ã€å„æ®µéšã§ãƒã‚§ãƒƒã‚¯ -->
    <script src="../src/config.js"></script>
    <script>
        log('ğŸ“ config.jsèª­ã¿è¾¼ã¿è©¦è¡Œå®Œäº†');
        if (typeof CANVAS_WIDTH !== 'undefined') {
            log(`âœ… CANVAS_WIDTHç¢ºèª: ${CANVAS_WIDTH}`, 'success');
        } else {
            log('âŒ CANVAS_WIDTHæœªå®šç¾©', 'error');
        }
        if (typeof PLAYER_CONFIG !== 'undefined') {
            log(`âœ… PLAYER_CONFIGç¢ºèª: ${JSON.stringify(PLAYER_CONFIG)}`, 'success');
        } else {
            log('âŒ PLAYER_CONFIGæœªå®šç¾©', 'error');
        }
    </script>

    <script src="../src/levels.js"></script>
    <script>
        log('ğŸ“ levels.jsèª­ã¿è¾¼ã¿è©¦è¡Œå®Œäº†');
        if (typeof levelData !== 'undefined') {
            log(`âœ… levelDataç¢ºèª: ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ${levelData.platforms?.length || 0}å€‹`, 'success');
        } else {
            log('âŒ levelDataæœªå®šç¾©', 'error');
        }
    </script>

    <script src="../src/music.js"></script>
    <script>
        log('ğŸ“ music.jsèª­ã¿è¾¼ã¿å®Œäº†');
    </script>

    <script src="../src/player-graphics.js"></script>
    <script>
        log('ğŸ“ player-graphics.jsèª­ã¿è¾¼ã¿å®Œäº†');
    </script>

    <script src="../src/svg-renderer.js"></script>
    <script>
        log('ğŸ“ svg-renderer.jsèª­ã¿è¾¼ã¿å®Œäº†');
    </script>

    <script src="../src/svg-player-renderer.js"></script>
    <script>
        log('ğŸ“ svg-player-renderer.jsèª­ã¿è¾¼ã¿å®Œäº†');
        if (typeof SVGPlayerRenderer !== 'undefined') {
            log('âœ… SVGPlayerRendererå®šç¾©ç¢ºèª', 'success');
        } else {
            log('âŒ SVGPlayerRendereræœªå®šç¾©', 'error');
        }
    </script>

    <script src="../src/svg-enemy-renderer.js"></script>
    <script>
        log('ğŸ“ svg-enemy-renderer.jsèª­ã¿è¾¼ã¿å®Œäº†');
    </script>

    <script src="../src/svg-item-renderer.js"></script>
    <script>
        log('ğŸ“ svg-item-renderer.jsèª­ã¿è¾¼ã¿å®Œäº†');
    </script>

    <script src="../src/game.js"></script>
    <script>
        log('ğŸ“ game.jsèª­ã¿è¾¼ã¿è©¦è¡Œå®Œäº†');
        
        // ã‚¯ãƒ©ã‚¹å®šç¾©ãƒã‚§ãƒƒã‚¯
        const classes = ['GameState', 'Player', 'InputManager', 'Game'];
        classes.forEach(className => {
            if (typeof window[className] !== 'undefined') {
                log(`âœ… ${className}ã‚¯ãƒ©ã‚¹å®šç¾©ç¢ºèª`, 'success');
            } else {
                log(`âŒ ${className}ã‚¯ãƒ©ã‚¹æœªå®šç¾©`, 'error');
            }
        });

        // å®Ÿéš›ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ãƒ†ã‚¹ãƒˆ
        try {
            log('ğŸ§ª ã‚¯ãƒ©ã‚¹ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            const gameState = new GameState();
            log(`âœ… GameStateä½œæˆæˆåŠŸ: åˆæœŸçŠ¶æ…‹=${gameState.state}`, 'success');
            
            const player = new Player(100, 200);
            log(`âœ… Playerä½œæˆæˆåŠŸ: ä½ç½®=(${player.x}, ${player.y})`, 'success');
            
            const inputManager = new InputManager();
            log(`âœ… InputManagerä½œæˆæˆåŠŸ`, 'success');
            
            // åŸºæœ¬å‹•ä½œãƒ†ã‚¹ãƒˆ
            player.handleInput({ right: true, left: false, jump: false });
            log(`âœ… Playerå³ç§»å‹•ãƒ†ã‚¹ãƒˆ: velX=${player.velX}`, 'success');
            
            player.onGround = true;
            player.isJumping = false;
            player.handleInput({ right: false, left: false, jump: true });
            log(`âœ… Playerã‚¸ãƒ£ãƒ³ãƒ—ãƒ†ã‚¹ãƒˆ: velY=${player.velY}`, player.velY < 0 ? 'success' : 'warning');
            
            log('ğŸ‰ åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå…¨ã¦æˆåŠŸï¼', 'success');
            
        } catch (error) {
            log(`âŒ ã‚¯ãƒ©ã‚¹ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            log(`ã‚¹ã‚¿ãƒƒã‚¯: ${error.stack}`, 'error');
        }

        // window.game ã®å­˜åœ¨ç¢ºèª
        setTimeout(() => {
            if (typeof window.game !== 'undefined') {
                log('âœ… window.gameåˆæœŸåŒ–ç¢ºèª', 'success');
            } else {
                log('âš ï¸ window.gameæœªåˆæœŸåŒ–ï¼ˆé€šå¸¸å‹•ä½œï¼‰', 'warning');
            }
            
            log('ğŸ ãƒ†ã‚¹ãƒˆå®Œäº†', 'success');
        }, 1000);
    </script>
</body>
</html>